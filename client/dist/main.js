(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,a,t){e.exports=t(78)},44:function(e,a,t){},46:function(e,a,t){},63:function(e,a,t){},70:function(e,a,t){},71:function(e,a,t){},72:function(e,a,t){},73:function(e,a,t){},74:function(e,a,t){},75:function(e,a,t){},76:function(e,a,t){},77:function(e,a,t){},78:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(34),s=t.n(c),l=(t(44),t(2)),i=t.n(l),o=t(6),m=t(1),u=(t(46),t(3)),d=t.n(u);var p=function(e){var a=Object(n.useState)([]),t=Object(m.a)(a,2),c=t[0],s=t[1],l=Object(n.useState)({}),u=Object(m.a)(l,2),p=(u[0],u[1]),f=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/posts",{withCredentials:!0}).then((function(e){return e.data})).then((function(e){var a=e.map((function(e){return e}));s(a)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){e.currentUser&&p(e.currentUser),f()}),[]);var E=c.filter((function(a){return a.userId.email===e.currentUser.email})).map((function(e){return r.a.createElement("div",{key:e._id,className:"myFakeTweets"},r.a.createElement("div",{className:"myFakeTweets__content"},e.content),r.a.createElement("div",{className:"myFakeTweets__date"},"Post\xe9 le ",e.date," \xe0 ",e.hours," ."),r.a.createElement("button",{onClick:function(){return a=e._id,window.confirm("\xeates-vous s\xfbr de vouloir supprimer ce Sweet ?")&&d.a.delete("/posts/deletePost/"+a,{withCredentials:!0}),void f();var a}}," Effacer "))}));return r.a.createElement("div",{className:"containerRight"},r.a.createElement("div",{className:"rightTitle"},r.a.createElement("h3",null,"Mes posts :")),r.a.createElement("div",{className:"rightContent"},E.reverse()))},f=(t(63),t(35)),E=t.n(f),v=t(4);var h=function(){var e=Object(v.f)();return r.a.createElement("nav",{className:"containerLeft"},r.a.createElement("div",{className:"leftButton"},r.a.createElement("button",{className:"buttonTweeter leftButton--logout",onClick:function(){d.a.post("/logout",{withCredentials:!0}).then((function(a){200===a.status&&(e.push("/login"),E.a.remove("token"))}))}}," ","Deconnexion"," ")))},b=t(19),_=t(13),g=(t(70),function(e){var a=Object(n.useState)([]),t=Object(m.a)(a,2),c=t[0],s=t[1],l=Object(n.useState)(),u=Object(m.a)(l,2),p=(u[0],u[1]),f=Object(_.a)(),E=f.register,v=f.handleSubmit,h=(f.watch,f.errors,function(){var e=Object(o.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/posts",{withCredentials:!0});case 2:a=e.sent,s(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),g=function(e){p(e.target.value)};Object(n.useEffect)((function(){h()}),[]);var N=c.map((function(e){return r.a.createElement("div",{key:e._id,className:"containerEachUser"},r.a.createElement("div",{className:"eachUseravatar"},r.a.createElement("img",{src:"/api/avatar/".concat(e.userId.avatar),alt:"photo utilisateur"})),r.a.createElement("div",{className:"eachUserPseudo"},r.a.createElement("p",null,e.userId.username)),r.a.createElement("div",{className:"eachUserPost"},e.content),r.a.createElement("div",{className:"eachUserPostTool"},"Post\xe9 le ",e.date," \xe0 ",e.hours," ."))}));return r.a.createElement("div",{className:"containterMain"},r.a.createElement("div",{className:"mainHeader"},r.a.createElement("div",{className:"mainform"},r.a.createElement("form",null,r.a.createElement("input",{className:"input--postTweet",type:"text",onChange:function(){return g},placeholder:"Quoi de neuf ?",name:"content",maxLength:"120",minLength:"1",ref:E({required:"content required"})}))),r.a.createElement("div",{className:"mainButton"},r.a.createElement("button",{className:"buttonTweeterMain",onClick:v((function(e){d.a.post("/posts/newPost",Object(b.a)({},e),{withCredentials:!0}),document.querySelector(".input--postTweet").value="",h()}))},"Poster"))),r.a.createElement("div",{className:"mainContent"},N.reverse()))}),N=(t(71),t(37));var w=function(){var e=Object(n.useState)({}),a=Object(m.a)(e,2),t=a[0],c=a[1],s=Object(n.useState)(""),l=Object(m.a)(s,2),i=l[0],o=l[1],u=Object(v.f)();return Object(n.useEffect)((function(){var e;d.a.get("/user/currentUser",{withCredentials:!0}).then((function(e){var a={id:e.data._id,email:e.data.email,username:e.data.username,avatar:e.data.avatar,createtAt:e.data.createdAt,updatedAt:e.data.updatedAt};if(e.data)return c(a)}));var a=document.cookie;a&&a.length>16?e=document.cookie.replace("token=",""):u.push("/login");var t=Object(N.a)(e);o(t)}),[]),t.id===i.sub?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"header"},r.a.createElement(A,null)),r.a.createElement("div",{className:"homeInfosBar"},r.a.createElement(P,null)),r.a.createElement("div",{className:"containerAsideLeft"},r.a.createElement(h,null)),r.a.createElement("div",{className:"containerMainCenter"},r.a.createElement(g,{currentUser:t})),r.a.createElement("div",{className:"containerAsideRight"},r.a.createElement(p,{currentUser:t}))):r.a.createElement(S,null)};var O=function(){return r.a.createElement("div",null,r.a.createElement("button",null,r.a.createElement("a",{href:"/home"},"Retour")),r.a.createElement("h1",null,"Cette page n'est pas encore disponible."))},j=t(79),y=(t(72),t(7));var C=function(){var e=Object(_.a)(),a=e.register,t=e.handleSubmit,c=(e.watch,e.errors),s=Object(n.useState)(""),l=Object(m.a)(s,2),i=l[0],o=l[1],u=Object(j.a)([""]),p=Object(m.a)(u,2),f=(p[0],p[1]),E=Object(v.f)();return r.a.createElement("div",{className:"containerLogin"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{className:"loginForm",onSubmit:t((function(e){d.a.post("/login",Object(b.a)({},e),{withCredentials:!0}).then((function(e){200!==e.status||e.data.error||(f("token",e.data.token),E.push("/home")),e.data.error&&o(e.data.error)}))}))},r.a.createElement("label",null,"Email"),r.a.createElement("input",{className:"loginForm__email",name:"email",type:"email",ref:a({required:"Email required"})}),c.email&&r.a.createElement("span",null,c.email.message),r.a.createElement("label",null,"Mot de passe"),r.a.createElement("input",{className:"loginForm__password",type:"password",name:"password",ref:a({required:"Password required"})}),c.password&&r.a.createElement("span",null,c.password.message),i?r.a.createElement("span",{className:"errorMessage"}," ",i," "):null,r.a.createElement("input",{type:"submit"})),r.a.createElement("span",null,"Pas encore de compte ? Cliquez ",r.a.createElement(y.b,{to:"/register"},"Ici !")))};t(73);var k=function(){var e=Object(_.a)(),a=e.register,t=e.handleSubmit,c=(e.watch,e.errors,Object(n.useState)("")),s=Object(m.a)(c,2),l=s[0],i=s[1],o=Object(j.a)([""]),u=Object(m.a)(o,2),p=(u[0],u[1]),f=Object(v.f)();return r.a.createElement("div",{className:"containerRegister"},r.a.createElement("h1",null,"Register"),r.a.createElement("span",null,l),r.a.createElement("form",{className:"registerForm",onSubmit:t((function(e){var a=new FormData;a.append("file",e.file[0]),a.append("email",e.email),a.append("password",e.password),a.append("username",e.username),d.a.post("/register",a,{withCredentials:!0}).then((function(e){200!==e.status||e.data.error||(p("token",e.data.token),f.push("/home")),e.data.error&&i(e.data.error)}))}))},r.a.createElement("label",null,"Avatar"),r.a.createElement("input",{className:"registerForm__avatar",type:"file",id:"file",name:"file",ref:a}),r.a.createElement("label",null,"username"),r.a.createElement("input",{className:"registerForm__email",name:"username",maxLength:"12",ref:a({required:"username required"})}),r.a.createElement("label",null,"Email"),r.a.createElement("input",{className:"registerForm__email",name:"email",type:"email",ref:a({required:"Email required"})}),r.a.createElement("label",null,"Mot de passe"),r.a.createElement("input",{className:"registerForm__password",type:"password",name:"password",ref:a({required:"Password required"})}),r.a.createElement("input",{type:"submit"})),r.a.createElement("span",null,"Deja un compte ? Cliquez ",r.a.createElement(y.b,{to:"/login"}," ici !")))};t(74);var S=function(){var e=Object(n.useState)([]),a=Object(m.a)(e,2),t=a[0],c=a[1],s=function(){var e=Object(o.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/posts");case 2:a=e.sent,c(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){s()}),[]);var l=t.map((function(e){return r.a.createElement("div",{key:e._id,className:"containerEachUser"},r.a.createElement("div",{className:"eachUseravatar"},r.a.createElement("img",{src:"/api/avatar/".concat(e.userId.avatar),alt:"utilisateur"})),r.a.createElement("div",{className:"eachUserPseudo"},e.userId.username),r.a.createElement("div",{className:"eachUserPost"},e.content),r.a.createElement("div",{className:"eachUserPostTool"},"Post\xe9 le ",e.date," \xe0 ",e.hours," ."))}));return r.a.createElement("div",{className:"container__Explorer"},r.a.createElement("div",{className:"explorer__AsideLeft"},r.a.createElement("ul",{className:"AsideLeft__ul"},r.a.createElement(y.b,{to:"/login"},r.a.createElement("button",{className:"AsideLeft__button"},"Login")),r.a.createElement(y.b,{to:"/register"},r.a.createElement("button",{className:"AsideLeft__button"},"Signup")))),r.a.createElement("div",{className:"explorer__AsideRight"},r.a.createElement("div",{className:"AsideRight__header"},r.a.createElement("h2",null,"Les derniers posts")),r.a.createElement("div",{className:"AsideRight__content"},l)))};t(75);var x=function(){var e=Object(n.useState)({}),a=Object(m.a)(e,2),t=a[0],c=a[1],s=Object(_.a)(),l=s.register,i=s.handleSubmit,o=(s.watch,s.errors,Object(v.f)());Object(n.useEffect)((function(){d.a.get("/user/currentUser",{withCredentials:!0}).then((function(e){var a={id:e.data._id,email:e.data.email,username:e.data.username,avatar:e.data.avatar,createdAt:e.data.createdAt,updatedAt:e.data.updatedAt};if(e.data)return c(a)}))}),[]);var u=function(e){var a=new FormData;a.append("file",e.file[0]),d.a.post("/user/updateUser/".concat(t.id),a,{withCredentials:!0}).then((function(e){return 200===e.status?o.push("/home"):null}))},p={backgroundImage:"url("+t.avatar+")"};return r.a.createElement("div",{className:"containerProfil",style:p},r.a.createElement("div",{className:"profil__avatar"},r.a.createElement("img",{alt:"profile picture",src:t.avatar?"/api/avatar/".concat(t.avatar):"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_960_720.png"})),r.a.createElement("div",{className:"profil__infos"},r.a.createElement("span",{className:"infos__email"}," ",t.email," ")," ",r.a.createElement("span",{className:"infos__pseudo"}," ",t.username," ")," ",r.a.createElement("span",{className:"infos__date"}," Cr\xe9e le  ",t.createdAt," ")," ",r.a.createElement("div",{className:"profil__form"},r.a.createElement("form",{className:"form__avatar",onSubmit:i(u)},r.a.createElement("label",{className:"profil__label",for:"file_input"},r.a.createElement("img",{alt:"change profile picture",src:"https://www.flaticon.com/svg/static/icons/svg/1837/1837635.svg"})),r.a.createElement("input",{className:"registerForm__avatar",type:"file",name:"file",id:"file_input",ref:l,onChange:i(u)}),r.a.createElement("input",{type:"submit"})))))};t(76);var A=function(){return r.a.createElement("div",{className:"headerContainer"},r.a.createElement("div",{className:"headerProfil"},r.a.createElement(x,null)),r.a.createElement("div",{className:"headerPictures"}))};t(77);var P=function(){var e=Object(n.useState)(""),a=Object(m.a)(e,2),t=a[0],c=a[1],s=Object(n.useState)(""),l=Object(m.a)(s,2),i=l[0],o=l[1];return Object(n.useEffect)((function(){var e=d.a.get("/user",{withCredentials:!0}),a=d.a.get("/posts",{withCredentials:!0});d.a.all([e,a]).then(d.a.spread((function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];var n=a[0].data.length,r=a[1].data.length;o(r),c(n)})))}),[]),r.a.createElement("div",{className:"infosBar__container"},r.a.createElement("div",{className:"infosBar__nbOfUsers InfosBar__content"},r.a.createElement("span",null," ",t," "),r.a.createElement("p",null,"Utilisateurs")),r.a.createElement("div",{className:"infosBar__nbOfPosts InfosBar__content"},r.a.createElement("span",null," ",i," "),r.a.createElement("p",null,"Posts")))};var U=function(){return r.a.createElement(y.a,null,r.a.createElement(v.c,null,r.a.createElement(v.a,{exact:!0,path:"/home",component:w}),r.a.createElement(v.a,{exact:!0,path:"/login",component:C}),r.a.createElement(v.a,{exact:!0,path:"/register",component:k}),r.a.createElement(v.a,{exact:!0,path:"/not_available_yet",component:O}),r.a.createElement(v.a,{exact:!0,path:"/",component:S})))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.js.map